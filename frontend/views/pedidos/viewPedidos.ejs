<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title><%= title %></title>
</head>
<body>

<h1><%= title %></h1>

<% if (typeof message !== 'undefined' && message) { %>
    <p style="color:red;"><%= message %></p>
<% } %>

<form method="POST" action="<%= data && data.pedidocompraid ? '/pedidos/update' : '/pedidos/insert' %>">

    <% if (data && data.pedidocompraid) { %>
        <input type="hidden" name="pedidocompraid" value="<%= data.pedidocompraid %>">
    <% } %>

    <label>NÃºmero do Pedido:</label><br>
    <input type="text" name="numero" value="<%= data ? data.numero : '' %>" required><br><br>

    <label>Data do Pedido:</label><br>
    <input type="date" name="datapedido" value="<%= data ? moment(data.datapedido).format('YYYY-MM-DD') : '' %>" required><br><br>

    <label>Valor Total:</label><br>
    <input type="number" step="0.01" name="valortotal" value="<%= data ? data.valortotal : '' %>" required><br><br>

    <label>Fornecedor:</label><br>
    <select name="fornecedorid" required>
        <option value="">Selecione um fornecedor...</option>
        <% fornecedores.forEach(f => { %>
            <option value="<%= f.fornecedorid %>" 
                <%= data && data.fornecedorid == f.fornecedorid ? 'selected' : '' %> >
                <%= f.nomefantasia %>
            </option>
        <% }); %>
    </select><br><br>

    <button type="submit">Salvar</button>
    <a href="/pedidos">Cancelar</a>

</form>

</body>
</html>